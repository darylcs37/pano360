<html>
<link rel="stylesheet" href="css/photo-sphere-viewer.min.css"/>

<script src="script/three.min.js"></script>
<script src="script/browser.min.js"></script>
<script src="script/photo-sphere-viewer.min.js"></script>
<script src="plugins/markers.js"></script>

<div id="viewer"></div>

<style>
  /* the viewer container must have a defined size */
  #viewer {
    width: 100%;
    height: 100%;
  }
</style>

<script>
  var viewer = new PhotoSphereViewer.Viewer({
    container: document.querySelector('#viewer'),
    panorama: './MY_2_UcdFraTZPrTxjfy0AeaqDQ (1.47224, 103.92093).jpg',
    loadingImg: 'images/photosphere-logo.gif',
    caption: 'Point-Of-Interest <b>2</b>',
  });


var markersPlugin = viewer.getPlugin(PhotoSphereViewer.MarkersPlugin);

/**
 * Create a new marker when the user clicks somewhere
 */
viewer.on('click', function(e, data) {
  if (!data.rightclick) {
    markersPlugin.addMarker({
      id: '#' + Math.random(),
      longitude: data.longitude,
      latitude: data.latitude,
      image: 'images/pin-red.png',
      width: 32,
      height: 32,
      anchor: 'bottom center',
      tooltip: 'Generated pin',
      data: {
        generated: true
      }
    });
  }
});

/**
 * Delete a generated marker when the user double-clicks on it
 * Or change the image if the user right-clicks on it
 */
markersPlugin.on('select-marker', function(e, marker, data) {
  if (marker.data && marker.data.generated) {
    if (data.dblclick) {
      markersPlugin.removeMarker(marker);
    } else if (data.rightclick) {
      markersPlugin.updateMarker({
        id: marker.id,
        image: 'images/pin-blue.png',
      });
    }
  }
});
</script>

</html>